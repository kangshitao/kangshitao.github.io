

<!DOCTYPE html>
<html lang="zh-CN" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Java学习笔记16-Java8的其它新特征 - Live And Learn</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  <meta name="keywords" content="hexo-blog,live and learn,kangshitao, Java, Lambda表达式,函数式接口,方法引用,构造器引用,Stream API,Optional">
  <meta name="description" content="Java 8 简介Java 8的特征：

速度更快
代...">
  <meta name="author" content="Kangshitao">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_r673sha78lq.css">

  

  
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/atelier-heath-light.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/monokai-sublime.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: '[object Object]'
      },
      donate: {
        enable: true,
        alipay: 'https://cdn.jsdelivr.net/gh/kangshitao/BlogPicture@main/img/alipay.jpg',
        wechat: 'https://cdn.jsdelivr.net/gh/kangshitao/BlogPicture@main/img/wechat.jpg'
      },
      galleries: {
        enable: true
      },
      fab: {
        enable: true,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: '心之所向，素履以往',
          typing: true,
          api: 'https://v2.jinrishici.com/one.json',
          data_contents: '["data","content"]'
        },
      },
      qrcode: {
        enable: true,
        type: 'url',
        image: '',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'normal'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: true,
        path: '/search.xml'
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Live And Learn" type="application/atom+xml">
</head>

<body class="lock-screen">
  <div class="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
        <i class="iconfont iconsearch j-navbar-search"></i>
      
    </div>
    <div class="center">Java学习笔记16-Java8的其它新特征</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/archives " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="https://cdn.jsdelivr.net/gh/kangshitao/BlogPicture@main/img/post_image_3.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">Java学习笔记16-Java8的其它新特征</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>四月 18, 2021</span>
      
        <span class="post-info-item">
          <i class="iconfont iconeye"></i><span id="/2021/04/18/java-note-1601/" class="leancloud" data-flag-title="Java学习笔记16-Java8的其它新特征"></span>
        </span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>18290</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <h1 id="Java-8-简介"><a href="#Java-8-简介" class="headerlink" title="Java 8 简介"></a>Java 8 简介</h1><p>Java 8的特征：</p>
<ul>
<li>速度更快</li>
<li>代码更少，因为新加入了Lambda表达式</li>
<li>强大的Stream API</li>
<li>便于并行</li>
<li>最大化减少空指针异常：Optional</li>
<li>Nashorn引擎，允许在JVM上运行JS应用。</li>
</ul>
<p>Java 8主要更新内容参考官方说明 <a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase/8-whats-new.html">What’s New in JDK 8</a></p>
<p>新特性总结：</p>
<p><img   class="lazyload" data-original="https://cdn.jsdelivr.net/gh/kangshitao/BlogPicture@main/img/java-note-1601_1.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" /></p>
<p><strong>并行流与串行流</strong><br><strong>并行流</strong>就是把一个内容分成多个数据块，并用不同的线程分别处理每个数据块的流。相比较串行的流，并行的流可以很大程度上提高程序的执行效率。</p>
<p>Java 8中将并行进行了优化，可以很容易的对数据进行并行操作。Stream API可以使用parallel()与sequential()方法在并行流与顺序流之间进行切换。</p>
<h1 id="一、Lambda表达式"><a href="#一、Lambda表达式" class="headerlink" title="一、Lambda表达式"></a>一、Lambda表达式</h1><p>Lambda表达式是JDK 8中新的语法，操作符为<code>-&gt;</code>，一个Lambda表达式由3部分构成：</p>
<p><code>左侧-&gt;右侧</code></p>
<p>其中操作符左侧指定Lambda表达式需要的参数列表，右侧指定了Lambda体，是抽象方法的实现逻辑，即Lambda表达式要执行的功能。</p>
<p>Lambda表达式的<strong>本质是函数式接口的实例</strong>，其作为接口的实例出现。</p>
<p>具体使用方式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//情况1:无参，无返回值</span><br>Runnable r = ()-&gt;&#123;System.out.println(<span class="hljs-string">&quot;hello&quot;</span>);&#125;;<br><br><span class="hljs-comment">//情况2，一个参数，无返回值</span><br>Consumer&lt;String&gt; con = (String str) -&gt;&#123;System.out.println(str);&#125;;<br><br><span class="hljs-comment">//情况3，数据类型可以省略，编译器可以推断，即类型推断</span><br>Consumer&lt;String&gt; con = (str) -&gt;&#123;System.out.println(str);&#125;;<br><br><span class="hljs-comment">//情况4，如果只有一个参数，参数的小括号可以省略</span><br>Consumer&lt;String&gt; con = str -&gt;&#123;System.out.println(str);&#125;;<br><br><span class="hljs-comment">//情况5，可以有两个及以上的参数，多条执行语句，有返回值</span><br>Comparator&lt;Integer&gt; com = (x,y)-&gt;&#123;<br>    System.out.println(<span class="hljs-string">&quot;hello&quot;</span>);<br>    <span class="hljs-keyword">return</span> Integer.compare(x,y);<br>&#125;;<br><br><span class="hljs-comment">//情况6，只有一条语句时，&#123;&#125;和return可以省略</span><br>Comparator&lt;Integer&gt; com = (x,y)-&gt;Integer.compare(x,y);<br></code></pre></td></tr></table></figure>
<p>总结：</p>
<ul>
<li><p>左边：lambda形参列表的参数类型可以省略(类型推断)；如果lambda形参列表只有一个参数，其一对()也可以省略。</p>
</li>
<li><p>右边：lambda体应该使用一对<code>&#123;&#125;</code>包裹；如果lambda体只有一条执行语句（可能是return语句），省略<code>&#123;&#125;</code>和<code>return</code>。如果有返回值，则<code>return</code>和<code>&#123;&#125;</code>必须都有。因此<code>&#123;&#125;</code>和<code>return</code>要么都有，要么都没有。</p>
</li>
</ul>
<h1 id="二、函数式-Functional-接口"><a href="#二、函数式-Functional-接口" class="headerlink" title="二、函数式(Functional)接口"></a>二、函数式(Functional)接口</h1><p><strong>函数式接口指的是只包含一个抽象方法的接口</strong>。可以用注解<code>@FunctionalInterface</code>检查。</p>
<p>可以通过Lambda表达式创建函数式接口的对象，执行体就是实现抽象方法的代码。如果Lambda表达式抛出非运行时异常，该异常需要在目标接口的抽象方法上声明。</p>
<p><strong>Lambda表达式是一个函数式接口的实例</strong>，只要一个对象是函数式接口的实例对象，就可以用Lambda表达式来表达。所以说<strong>实现函数式接口的匿名实现类的表示方式都可以改成Lambda表达式</strong>的形式。</p>
<p><code>java.util.function</code>包下定义了Java8的丰富的函数式接口，其中有四种核心的函数式接口：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">函数式接口</th>
<th style="text-align:center">参数类型</th>
<th style="text-align:center">返回类型</th>
<th style="text-align:left">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">消费型接口<code>Consumer&lt;T&gt;</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:center"><code>void</code></td>
<td style="text-align:left">对类型为<code>T</code>的对象应用操作，包含方法<code>void accept(T t)</code>，相当于消费者</td>
</tr>
<tr>
<td style="text-align:left">供给型接口<code>Supplier&lt;T&gt;</code></td>
<td style="text-align:center">无</td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:left">返回类型为<code>T</code>的对象，包含方法：<code>T get()</code>，相当于供给者，用户获取对象</td>
</tr>
<tr>
<td style="text-align:left">函数型接口<code>Function&lt;T, R&gt;</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:center"><code>R</code></td>
<td style="text-align:left">对类型为<code>T</code>的对象应用操作，并返回结果是<code>R</code>类型的对象。包含方法：<code>R apply(T t)</code>，用于类型转换</td>
</tr>
<tr>
<td style="text-align:left">断定型接口<code>Predicate&lt;T&gt;</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:center"><code>boolean</code></td>
<td style="text-align:left">确定类型为<code>T</code>的对象是否满足某约束，并返回<code>boolean</code>值。包含方法：<code>boolean test(T t)</code>，用于判断</td>
</tr>
</tbody>
</table>
</div>
<p>其他函数式接口：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">函数式接口</th>
<th style="text-align:center">参数类型</th>
<th style="text-align:center">返回类型</th>
<th style="text-align:left">用途</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>BiFunction&lt;T,U,R&gt;</code></td>
<td style="text-align:center"><code>T</code>, <code>U</code></td>
<td style="text-align:center"><code>R</code></td>
<td style="text-align:left">对类型为<code>T</code>,<code>U</code>参数应用操作，返回R类型的结果。包含方法为：<code>R apply(T t, U u);</code></td>
</tr>
<tr>
<td style="text-align:left"><code>UnaryOperator&lt;T&gt;</code><br />(<code>Function</code>子接口)</td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:left">对类型为<code>T</code>的对象进行一元运算，并返回T类型的结果。包含方法为：<code>T apply(T t);</code></td>
</tr>
<tr>
<td style="text-align:left"><code>BinaryOperator&lt;T&gt;</code><br />(<code>BiFunction</code>子接口)</td>
<td style="text-align:center"><code>T</code>,<code>T</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:left">对类型为<code>T</code>的对象进行二元运算，并返回<code>T</code>类型的结果。<br />包含方法为：<code>T apply(Tt 1,Tt 2);</code></td>
</tr>
<tr>
<td style="text-align:left"><code>BiConsumer&lt;T,U&gt;</code></td>
<td style="text-align:center"><code>T</code>, <code>U</code></td>
<td style="text-align:center"><code>void</code></td>
<td style="text-align:left">对类型为<code>T</code>,<code>U</code>参数应用操作。<br/>包含方法为：<code>void accept(T t,U u);</code></td>
</tr>
<tr>
<td style="text-align:left"><code>BiPredicate&lt;T,U&gt;</code></td>
<td style="text-align:center"><code>T</code>, <code>U</code></td>
<td style="text-align:center"><code>boolean</code></td>
<td style="text-align:left">包含方法为：<code>boolean test(T t,U u);</code></td>
</tr>
<tr>
<td style="text-align:left"><code>ToIntFunction&lt;T&gt;</code><br /><code>ToLongFunction&lt;T&gt;</code><br /><code>ToDoubleFunction&lt;T&gt;</code></td>
<td style="text-align:center"><code>T</code></td>
<td style="text-align:center"><code>int</code><br/><code>long</code><br/><code>double</code></td>
<td style="text-align:left">分别计算<code>int</code>、<code>long</code>、<code>double</code>值的函数</td>
</tr>
<tr>
<td style="text-align:left"><code>IntFunction&lt;R&gt;</code><br /><code>LongFunction&lt;R&gt;</code><br /><code>DoubleFunction&lt;R&gt;</code></td>
<td style="text-align:center"><code>int</code><br/><code>long</code><br/><code>double</code></td>
<td style="text-align:center"><code>R</code></td>
<td style="text-align:left">参数分别为<code>int</code>、<code>long</code>、<code>double</code>类型的函数</td>
</tr>
</tbody>
</table>
</div>
<p>使用实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LambdaTest</span> </span>&#123;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//方法一，使用匿名实现类，重写accept方法。</span><br>        happyTime(<span class="hljs-number">500</span>, <span class="hljs-keyword">new</span> Consumer&lt;Double&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(Double m)</span> </span>&#123;<br>                System.out.println(<span class="hljs-string">&quot;价格为：&quot;</span> + m);<br>            &#125;<br>        &#125;);<br>        System.out.println(<span class="hljs-string">&quot;********************&quot;</span>);<br>        <span class="hljs-comment">//方法二，使用Lambda表达式，执行体就是相当于重写accept方法。</span><br>        happyTime(<span class="hljs-number">400</span>,money -&gt; System.out.println(<span class="hljs-string">&quot;价格为：&quot;</span> + money));<br>    &#125;<br>    <span class="hljs-comment">//happyTime方法第二个参数是消费型接口类型的实例</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">happyTime</span><span class="hljs-params">(<span class="hljs-keyword">double</span> money, Consumer&lt;Double&gt; con)</span></span>&#123;<br>        con.accept(money);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="三、方法引用与构造器引用"><a href="#三、方法引用与构造器引用" class="headerlink" title="三、方法引用与构造器引用"></a>三、方法引用与构造器引用</h1><h2 id="1、方法引用"><a href="#1、方法引用" class="headerlink" title="1、方法引用"></a>1、方法引用</h2><p>当要传给Lambda体的操作，已经有实现的方法了，可以使用<strong>方法引用</strong>。</p>
<p>方法引用，本质上是Lambda表达式，可以认为是Lambda表达式的一个语法糖。所以<strong>方法引用也是函数式接口的实例</strong>。方法引用的操作符为<code>::</code></p>
<p>方法引用有三种方式：</p>
<ul>
<li>对象::实例方法名</li>
<li>类::静态方法名</li>
<li>类::实例方法名</li>
</ul>
<p>对于前两种方式，要求接口中的<strong>抽象方法的形参列表和返回值类型</strong>必须和<strong>方法引用的方法的形参列表和返回值类型</strong>相同。</p>
<p>使用举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">自定义Employee类。包含空参构造器和带参构造器。</span><br><span class="hljs-comment">其中getName()方法定义如下</span><br><span class="hljs-comment">public String getName() &#123;return name;&#125;</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MethodRefTest</span> </span>&#123;<br>	<span class="hljs-comment">// 情况一：对象 :: 实例方法</span><br>	<span class="hljs-comment">/*例1：</span><br><span class="hljs-comment">	Consumer中的void accept(T t)</span><br><span class="hljs-comment">	PrintStream中的void println(T t)，二者都是返回某个类型的对象。</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Consumer&lt;String&gt; con1 = str -&gt; System.out.println(str);<br>		con1.accept(<span class="hljs-string">&quot;北京&quot;</span>);<br>		<span class="hljs-comment">//方法引用写法</span><br>		PrintStream ps = System.out;<br>		Consumer&lt;String&gt; con2 = ps::println;<br>		<span class="hljs-comment">//Consumer&lt;String&gt; con2 = System.out::println;  //和上面相同</span><br>		con2.accept(<span class="hljs-string">&quot;beijing&quot;</span>);<br>	&#125;<br>	<span class="hljs-comment">/*</span><br><span class="hljs-comment">	例2，</span><br><span class="hljs-comment">	Supplier中的T get()</span><br><span class="hljs-comment">	Employee类中的String getName()，二者都是返回某个类型的对象。</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span> </span>&#123;<br>		Employee emp = <span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>,<span class="hljs-number">23</span>,<span class="hljs-number">5600</span>);<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Supplier&lt;String&gt; sup1 = () -&gt; emp.getName();<br>		System.out.println(sup1.get());<br>		<span class="hljs-comment">//方法引用写法</span><br>		Supplier&lt;String&gt; sup2 = emp::getName;<br>		System.out.println(sup2.get());<br>	&#125;<br><br>	<span class="hljs-comment">// 情况二：类 :: 静态方法</span><br>	<span class="hljs-comment">/*例1：</span><br><span class="hljs-comment">	Comparator中的int compare(T t1,T t2)</span><br><span class="hljs-comment">	Integer中的int compare(T t1,T t2)，二者实现方法相同</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Comparator&lt;Integer&gt; com1 = (t1,t2) -&gt; Integer.compare(t1,t2);<br>		System.out.println(com1.compare(<span class="hljs-number">12</span>,<span class="hljs-number">21</span>));<br>		<span class="hljs-comment">//方法引用写法</span><br>		Comparator&lt;Integer&gt; com2 = Integer::compare;<br>		System.out.println(com2.compare(<span class="hljs-number">12</span>,<span class="hljs-number">3</span>));<br>	&#125;<br>	<span class="hljs-comment">/*例2：</span><br><span class="hljs-comment">	Function中的R apply(T t)</span><br><span class="hljs-comment">	Math中的Long round(Double d)</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">//匿名实现类写法</span><br>		Function&lt;Double,Long&gt; func = <span class="hljs-keyword">new</span> Function&lt;Double, Long&gt;() &#123;<br>			<span class="hljs-meta">@Override</span><br>			<span class="hljs-function"><span class="hljs-keyword">public</span> Long <span class="hljs-title">apply</span><span class="hljs-params">(Double d)</span> </span>&#123;<span class="hljs-keyword">return</span> Math.round(d);&#125;<br>		&#125;;<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Function&lt;Double,Long&gt; func1 = d -&gt; Math.round(d);<br>		System.out.println(func1.apply(<span class="hljs-number">12.3</span>));<br>		<span class="hljs-comment">//方法引用写法</span><br>		Function&lt;Double,Long&gt; func2 = Math::round;<br>		System.out.println(func2.apply(<span class="hljs-number">12.6</span>));<br>	&#125;<br><br>	<span class="hljs-comment">// 情况三：类 :: 实例方法</span><br>	<span class="hljs-comment">/*例1：</span><br><span class="hljs-comment">	Comparator中的int comapre(T t1,T t2)</span><br><span class="hljs-comment">	String中的int t1.compareTo(t2)</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test5</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Comparator&lt;String&gt; com1 = (s1,s2) -&gt; s1.compareTo(s2);<br>		System.out.println(com1.compare(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>		<span class="hljs-comment">//方法引用写法</span><br>		Comparator&lt;String&gt; com2 = String :: compareTo;<br>		System.out.println(com2.compare(<span class="hljs-string">&quot;abd&quot;</span>,<span class="hljs-string">&quot;abm&quot;</span>));<br>	&#125;<br>	<span class="hljs-comment">/*例2：</span><br><span class="hljs-comment">	BiPredicate中的boolean test(T t1, T t2);</span><br><span class="hljs-comment">	String中的boolean t1.equals(t2)</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test6</span><span class="hljs-params">()</span> </span>&#123;<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		BiPredicate&lt;String,String&gt; pre1 = (s1,s2) -&gt; s1.equals(s2);<br>		System.out.println(pre1.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abc&quot;</span>));<br>		<span class="hljs-comment">//方法引用写法</span><br>		BiPredicate&lt;String,String&gt; pre2 = String :: equals;<br>		System.out.println(pre2.test(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;abd&quot;</span>));<br>	&#125;<br>	<span class="hljs-comment">/*例3：</span><br><span class="hljs-comment">	Function中的R apply(T t)</span><br><span class="hljs-comment">	Employee中的String getName();</span><br><span class="hljs-comment">	*/</span><br>	<span class="hljs-meta">@Test</span><br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test7</span><span class="hljs-params">()</span> </span>&#123;<br>		Employee employee = <span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;Jerry&quot;</span>, <span class="hljs-number">23</span>, <span class="hljs-number">6000</span>);<br>		<span class="hljs-comment">//Lambda表达式写法</span><br>		Function&lt;Employee,String&gt; func1 = e -&gt; e.getName();<br>		System.out.println(func1.apply(employee));<br>		<span class="hljs-comment">//方法引用写法</span><br>		Function&lt;Employee,String&gt; func2 = Employee::getName;<br>		System.out.println(func2.apply(employee));<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2、构造器引用"><a href="#2、构造器引用" class="headerlink" title="2、构造器引用"></a>2、构造器引用</h2><p>格式：<code>ClassName::new</code></p>
<p>和方法引用类似，要求函数式接口的<strong>抽象方法的形参列表</strong>和<strong>构造器的形参列表</strong>一致。</p>
<p>抽象方法的返回值类型即为构造器所属的类的类型。</p>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConstructorRefTest</span> </span>&#123;<br>    <span class="hljs-comment">//构造器引用</span><br>    <span class="hljs-comment">/*例1：</span><br><span class="hljs-comment">    Supplier中的T get()</span><br><span class="hljs-comment">    Employee的空参构造器：Employee()</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//匿名实现类写法</span><br>        Supplier&lt;Employee&gt; sup = <span class="hljs-keyword">new</span> Supplier&lt;Employee&gt;() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-function"><span class="hljs-keyword">public</span> Employee <span class="hljs-title">get</span><span class="hljs-params">()</span> </span>&#123;<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Employee();&#125;<br>        &#125;;<br>        <span class="hljs-comment">//Lambda表达式写法</span><br>        Supplier&lt;Employee&gt;  sup1 = () -&gt; <span class="hljs-keyword">new</span> Employee();<br>        System.out.println(sup1.get());<br>        <span class="hljs-comment">//构造器引用写法</span><br>        Supplier&lt;Employee&gt;  sup2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(sup2.get());<br>    &#125;<br>    <span class="hljs-comment">/*例2：</span><br><span class="hljs-comment">    BiFunction中的R apply(T t,U u)</span><br><span class="hljs-comment">    Employee的带参构造器：Employee(int id, String name)</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//Lambda表达式写法</span><br>        BiFunction&lt;Integer,String,Employee&gt; func1 = <br>            (id,name) -&gt; <span class="hljs-keyword">new</span> Employee(id,name);<br>        System.out.println(func1.apply(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br>        <span class="hljs-comment">//构造器引用写法</span><br>        BiFunction&lt;Integer,String,Employee&gt; func2 = Employee :: <span class="hljs-keyword">new</span>;<br>        System.out.println(func2.apply(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Tom&quot;</span>));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="3、数组引用"><a href="#3、数组引用" class="headerlink" title="3、数组引用"></a>3、数组引用</h2><p>格式：<code>type[]::new</code>，其中type表示数组类型。</p>
<p>可以将数组看成一个特殊的类，写法与构造器引用一致。</p>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayRefTest</span> </span>&#123;<br>    <span class="hljs-comment">//数组引用</span><br>    <span class="hljs-comment">//Function中的R apply(T t)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//Lambda表达式写法</span><br>        Function&lt;Integer,String[]&gt; func1 = length -&gt; <span class="hljs-keyword">new</span> String[length];<br>        String[] arr1 = func1.apply(<span class="hljs-number">5</span>);<br>        System.out.println(Arrays.toString(arr1));<br>        <span class="hljs-comment">//数组引用写法</span><br>        Function&lt;Integer,String[]&gt; func2 = String[] :: <span class="hljs-keyword">new</span>;<br>        String[] arr2 = func2.apply(<span class="hljs-number">10</span>);<br>        System.out.println(Arrays.toString(arr2));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="四、强大的Stream-API"><a href="#四、强大的Stream-API" class="headerlink" title="四、强大的Stream API"></a>四、强大的Stream API</h1><h2 id="1、Stream简介"><a href="#1、Stream简介" class="headerlink" title="1、Stream简介"></a>1、Stream简介</h2><p><strong>Stream API ( java.util.stream)</strong>把真正的函数式编程风格引入到Java中。这是目前为止对Java类库最好的补充，Stream API可以极大提高Java程序员的生产力。</p>
<p><strong>Stream</strong>是数据渠道，用于操作数据源(集合、数组等)所生成的元素序列。</p>
<p><strong>Stream API</strong>可以对集合进行操作，可以执行非常复杂的<strong>查找</strong>、<strong>过滤</strong>和<strong>映射数据</strong>等操作，类似于使用SQL执行的数据库查询。<br>也可以使用Stream API来并行执行操作。简言之，Stream API提供了一种高效且易于使用的处理数据的方式。</p>
<p><strong>Stream和Collection集合的区别</strong>：</p>
<p><code>Collection</code>是一种静态的内存数据结构。主要面向内存，存储在内存中。</p>
<p><code>Stream</code>是有关计算的。主要是面向CPU，通过CPU实现计算。</p>
<p><strong>Stream的特点</strong>：</p>
<ul>
<li>Stream 自己不会存储元素。</li>
<li>Stream 不会改变源对象，会返回一个持有结果的新Stream，类似于视图(Collections工具类会对集合本身进行修改，比如排序操作)。</li>
<li>Stream 操作是延迟执行的，即会等到需要结果的时候才执行，执行终止操作的时候才执行中间操作。</li>
</ul>
<h2 id="2、使用Stream"><a href="#2、使用Stream" class="headerlink" title="2、使用Stream"></a>2、使用Stream</h2><p>想要使用Stream，需要执行以下三个步骤：</p>
<ul>
<li>实例化<code>Stream</code>类(<code>java.util.stream.Stream</code>)，得到<code>Stream</code>类对象<code>stream</code>。</li>
<li>中间操作。中间操作链，对数据源的数据进行处理，比如排序，筛选，映射等。</li>
<li>终止操作。执行终止操作时才会执行中间操作，并产生结果。终止操作后，<code>stream</code>不能再被使用。</li>
</ul>
<h2 id="3、Stream实例化"><a href="#3、Stream实例化" class="headerlink" title="3、Stream实例化"></a>3、Stream实例化</h2><p>Stream类有四种实例化方法：</p>
<ul>
<li>通过集合。Java 8的<code>Collection</code>接口被扩展，提供了两个获取<code>Stream</code>实例的方法：<ul>
<li><code>default Stream&lt;E&gt; stream()</code>：返回一个顺序流</li>
<li><code>default Stream&lt;E&gt; parallelStream()</code>:返回一个并行流</li>
</ul>
</li>
<li>通过数组。<code>Arrays</code>工具类提供了<code>stream()</code>方法，用于获取数组流，对于不同的数据类型，提供了其重载方法，返回的类型也不同：<ul>
<li><code>public static &lt;T&gt; Stream&lt;T&gt; stream(T[] array)</code>：返回<code>Stream</code>实例。</li>
<li><code>public static IntStream stream(int[] array)</code>：对于<code>int</code>型数组，返回<code>IntStream</code>实例。</li>
<li><code>public static LongStream stream(long[] array)</code>：对于<code>long</code>型数组，返回<code>LongStream</code>实例。</li>
<li><code>public static DoubleStream stream(double[] array)</code>：对于<code>double</code>型数组，返回<code>DoubleStream</code>实例。</li>
</ul>
</li>
<li>通过<code>Stream</code>类的<code>of()</code>方法。<ul>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; of(T...values)</code>：参数可以是单个数据，或者多个数据。如果直接将数组或者是集合作为参数，默认当作一个参数。参数不能为单个<code>null</code>，但是可以是多个<code>null</code></li>
</ul>
</li>
<li>通过<code>Stream</code>类静态方法创建无限流。创建无限流有两种方式：<ul>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; iterate(final T seed, final UnaryOperator&lt;T&gt; f)</code>：迭代</li>
<li><code>public static&lt;T&gt; Stream&lt;T&gt; generate(Supplier&lt;T&gt; s)</code>：生成</li>
</ul>
</li>
</ul>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StreamAPITest</span> </span>&#123;<br>    <span class="hljs-comment">//创建 Stream方式一：通过集合</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>        List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>        <span class="hljs-comment">//返回一个顺序流</span><br>        Stream&lt;Employee&gt; stream = employees.stream();<br>		<br>        <span class="hljs-comment">//返回一个并行流</span><br>        Stream&lt;Employee&gt; parallelStream = employees.parallelStream();<br>    &#125;<br><br>    <span class="hljs-comment">//创建 Stream方式二：通过数组</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//对于int、long、double类型数组，返回特定的stream</span><br>        <span class="hljs-keyword">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[]&#123;<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>&#125;;<br>        IntStream stream = Arrays.stream(arr);<br><br>        <span class="hljs-comment">//传入对象数组</span><br>        Employee e1 = <span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1001</span>,<span class="hljs-string">&quot;Tom&quot;</span>);<br>        Employee e2 = <span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1002</span>,<span class="hljs-string">&quot;Jerry&quot;</span>);<br>        Employee[] arr1 = <span class="hljs-keyword">new</span> Employee[]&#123;e1,e2&#125;;<br>        Stream&lt;Employee&gt; stream1 = Arrays.stream(arr1);<br>    &#125;<br>    <span class="hljs-comment">//创建 Stream方式三：通过Stream的of()</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//注意传入的参数个数</span><br>        List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>        Stream&lt;List&lt;Integer&gt;&gt; list1 = Stream.of(list);<br>        Stream&lt;Object&gt; objectStream = Stream.of(list.toArray());<br><br>        <span class="hljs-comment">//直接传入集合或数组，当成一个参数</span><br>        <span class="hljs-keyword">int</span>[] array = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">3</span>];<br>        Stream&lt;<span class="hljs-keyword">int</span>[]&gt; array1 = Stream.of(array);<br>        <br>        Stream&lt;Integer&gt; stream = Stream.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);<br>    &#125;<br>    <span class="hljs-comment">//方式四：创建无限流</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//迭代</span><br>        <span class="hljs-comment">//遍历前10个偶数</span><br>        Stream.iterate(<span class="hljs-number">0</span>, t -&gt; t + <span class="hljs-number">2</span>).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br>		<br>        <span class="hljs-comment">//生成</span><br>        Stream.generate(Math::random).limit(<span class="hljs-number">10</span>).forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="4、Stream中间操作"><a href="#4、Stream中间操作" class="headerlink" title="4、Stream中间操作"></a>4、Stream中间操作</h2><p>有了<code>Stream</code>类的对象以后，可以执行中间操作。中间操作可以链式操作，只有遇到终止操作的时候，中间操作才会一次性执行，称为“惰性求值”。</p>
<p>中间操作分成以下3种：</p>
<p>①<strong>筛选与切片</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>filter(Predicate p)</code></td>
<td style="text-align:left">接收Lambda表达式，从流中排除某些元素</td>
</tr>
<tr>
<td style="text-align:left"><code>distinct()</code></td>
<td style="text-align:left">筛选，通过流所生成元素的<code>hashCode()</code>和<code>equals()</code>去除重复元素</td>
</tr>
<tr>
<td style="text-align:left"><code>limit(long maxSize)</code></td>
<td style="text-align:left">截断流，使其元素不超过给定数量</td>
</tr>
<tr>
<td style="text-align:left"><code>skip(long n)</code></td>
<td style="text-align:left">跳过元素，返回一个跳过前n个元素的流。<br />若流中元素不足n个，则返回一个空流。与<code>limit(n)</code>操作互补</td>
</tr>
</tbody>
</table>
</div>
<p>②<strong>映射</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>map(Functionf)</code></td>
<td style="text-align:left">接收一个函数作为参数，该函数会被应用到每个元素上，<br />并将其映射成一个新的元素。</td>
</tr>
<tr>
<td style="text-align:left"><code>mapToDouble(ToDoubleFunction f)</code></td>
<td style="text-align:left">接收一个函数作为参数，该函数会被应用到每个元素上，<br />产生一个新的<code>DoubleStream</code>。</td>
</tr>
<tr>
<td style="text-align:left"><code>mapToInt(ToIntFunction f)</code></td>
<td style="text-align:left">接收一个函数作为参数，该函数会被应用到每个元素上，<br />产生一个新的<code>IntStream</code>。</td>
</tr>
<tr>
<td style="text-align:left"><code>mapToLong(ToLongFunction f)</code></td>
<td style="text-align:left">接收一个函数作为参数，该函数会被应用到每个元素上，<br />产生一个新的<code>LongStream</code>。</td>
</tr>
<tr>
<td style="text-align:left"><code>flatMap(Function f)</code></td>
<td style="text-align:left">接收一个函数作为参数，将流中的每个值都换成另一个流，<br/>然后把所有流连接成一个流</td>
</tr>
</tbody>
</table>
</div>
<p>③<strong>排序</strong></p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>sorted()</code></td>
<td style="text-align:left">产生一个新流，按自然顺序排序</td>
</tr>
<tr>
<td style="text-align:left"><code>sorted(Comparator com)</code></td>
<td style="text-align:left">产生一个新流，按比较器顺序排序</td>
</tr>
</tbody>
</table>
</div>
<h2 id="5、Stream终止操作"><a href="#5、Stream终止操作" class="headerlink" title="5、Stream终止操作"></a>5、Stream终止操作</h2><p>终止操作会从流的流水线生成结果。其结果可以是任何不是流的值，例如：<code>List</code>、<code>Integer</code>，甚至是<code>void</code>。</p>
<p>流进行了终止操作后，不能再次被使用。</p>
<p>终止操作有以下几种：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>count()</code></td>
<td style="text-align:left">返回流中元素总数</td>
</tr>
<tr>
<td style="text-align:left"><code>max(Comparator c)</code></td>
<td style="text-align:left">返流中最大值</td>
</tr>
<tr>
<td style="text-align:left"><code>min(Comparator)</code></td>
<td style="text-align:left">返回流中最小值</td>
</tr>
<tr>
<td style="text-align:left"><code>forEach(Consumer c)</code></td>
<td style="text-align:left">内部迭代<br />(使用<code>Collection</code>接口需要用户去做迭代，称为外部迭代)</td>
</tr>
<tr>
<td style="text-align:left"><code>reduce(T iden,BinaryOperator b)</code>，   规约</td>
<td style="text-align:left">可以将流中元素反复结合起来，得到一个值。<br />返回<code>T</code></td>
</tr>
<tr>
<td style="text-align:left"><code>reduce(BinaryOperator b)</code>，   规约</td>
<td style="text-align:left">可以将流中元素反复结合起来，得到一个值。<br />返回<code>Optional</code><T></td>
</tr>
<tr>
<td style="text-align:left"><code>collect(Collector c)</code>，收集</td>
<td style="text-align:left">将流转换为其他形式。<br />接收一个<code>Collector</code>接口的实现，用于给<code>Stream</code>中元素做汇总的方法</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p>map和reduce的连接通常称为map-reduce模式。</p>
</blockquote>
<p><code>Collector</code>接口（收集器）中方法的实现决定了如何对流执行收集的操作(如收集到<code>List</code>、<code>Set</code>、<code>Map</code>)。<br>另外，<code>Collectors</code>类提供了很多静态方法，可以方便地创建<code>Collector</code>实例，具体方法如下表：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">方法</th>
<th style="text-align:left">返回类型</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>toList</code></td>
<td style="text-align:left"><code>List&lt;T&gt;</code></td>
<td style="text-align:left">把流中元素收集到<code>List</code></td>
</tr>
<tr>
<td style="text-align:left"><code>toSet</code></td>
<td style="text-align:left"><code>Set&lt;T&gt;</code></td>
<td style="text-align:left">把流中元素收集到<code>Set</code></td>
</tr>
<tr>
<td style="text-align:left"><code>toCollection</code></td>
<td style="text-align:left"><code>Collection&lt;T&gt;</code></td>
<td style="text-align:left">把流中元素收集到创建的集合</td>
</tr>
<tr>
<td style="text-align:left"><code>counting</code></td>
<td style="text-align:left"><code>Long</code></td>
<td style="text-align:left">计算流中元素的个数</td>
</tr>
<tr>
<td style="text-align:left"><code>summingInt</code></td>
<td style="text-align:left"><code>Integer</code></td>
<td style="text-align:left">对流中元素的整数属性求和</td>
</tr>
<tr>
<td style="text-align:left"><code>averagingInt</code></td>
<td style="text-align:left"><code>Double</code></td>
<td style="text-align:left">计算流中元素<code>Integer</code>属性的平均值</td>
</tr>
<tr>
<td style="text-align:left"><code>summarizingInt</code></td>
<td style="text-align:left"><code>IntSummaryStatistics</code></td>
<td style="text-align:left">收集流中<code>Integer</code>属性的统计值。如：平均值</td>
</tr>
<tr>
<td style="text-align:left"><code>joining</code></td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">连接流中每个字符串</td>
</tr>
<tr>
<td style="text-align:left"><code>maxBy</code></td>
<td style="text-align:left"><code>Optional&lt;T&gt;</code></td>
<td style="text-align:left">根据比较器选择最大值</td>
</tr>
<tr>
<td style="text-align:left"><code>minBy</code></td>
<td style="text-align:left"><code>Optional&lt;T&gt;</code></td>
<td style="text-align:left">根据比较器选择最小值</td>
</tr>
<tr>
<td style="text-align:left"><code>reducing</code></td>
<td style="text-align:left">归约产生的类型</td>
<td style="text-align:left">从一个作为累加器的初始值开始，利用<code>BinaryOperator</code>与流中元素逐个结合，从而归约成单个值</td>
</tr>
<tr>
<td style="text-align:left"><code>collectingAndThen</code></td>
<td style="text-align:left">转换函数返回的类型</td>
<td style="text-align:left">包裹另一个收集器，对其结果转换函数</td>
</tr>
<tr>
<td style="text-align:left"><code>groupingBy</code></td>
<td style="text-align:left"><code>Map&lt;K, List&lt;T&gt;&gt;</code></td>
<td style="text-align:left">根据某属性值对流分组，属性为<code>K</code>结果为<code>V</code></td>
</tr>
<tr>
<td style="text-align:left"><code>partitioningBy</code></td>
<td style="text-align:left"><code>Map&lt;Boolean,List&lt;T&gt;&gt;</code></td>
<td style="text-align:left">根据<code>true</code>或<code>false</code>进行分区</td>
</tr>
</tbody>
</table>
</div>
<p>代码实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/*</span><br><span class="hljs-comment">Employee的带参构造器声明：</span><br><span class="hljs-comment">public Employee(int id, String name, int age, double salary)</span><br><span class="hljs-comment">*/</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EmployeeData</span> </span>&#123;<br>	<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;Employee&gt; <span class="hljs-title">getEmployees</span><span class="hljs-params">()</span></span>&#123;<br>		List&lt;Employee&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1001</span>, <span class="hljs-string">&quot;马化腾&quot;</span>, <span class="hljs-number">34</span>, <span class="hljs-number">6000.38</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1002</span>, <span class="hljs-string">&quot;马云&quot;</span>, <span class="hljs-number">12</span>, <span class="hljs-number">9876.12</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1003</span>, <span class="hljs-string">&quot;刘强东&quot;</span>, <span class="hljs-number">33</span>, <span class="hljs-number">3000.82</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1004</span>, <span class="hljs-string">&quot;雷军&quot;</span>, <span class="hljs-number">26</span>, <span class="hljs-number">7657.37</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1005</span>, <span class="hljs-string">&quot;李彦宏&quot;</span>, <span class="hljs-number">65</span>, <span class="hljs-number">5555.32</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1006</span>, <span class="hljs-string">&quot;比尔盖茨&quot;</span>, <span class="hljs-number">42</span>, <span class="hljs-number">9500.43</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1007</span>, <span class="hljs-string">&quot;任正非&quot;</span>, <span class="hljs-number">26</span>, <span class="hljs-number">4333.32</span>));<br>		list.add(<span class="hljs-keyword">new</span> Employee(<span class="hljs-number">1008</span>, <span class="hljs-string">&quot;扎克伯格&quot;</span>, <span class="hljs-number">35</span>, <span class="hljs-number">2500.32</span>));<br>		<span class="hljs-keyword">return</span> list;<br>	&#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StreamAPITest2</span> </span>&#123;<br>    <span class="hljs-comment">//1-匹配与查找</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test1</span><span class="hljs-params">()</span></span>&#123;<br>        List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>        <span class="hljs-comment">//练习：判断是否所有的员工的年龄都大于18</span><br>        <span class="hljs-keyword">boolean</span> allMatch = employees.stream().allMatch(e -&gt; e.getAge() &gt; <span class="hljs-number">18</span>);<br>        System.out.println(allMatch);<br><br>        <span class="hljs-comment">//练习：判断是否存在员工姓“雷”</span><br>        <span class="hljs-keyword">boolean</span> noneMatch = employees.stream().<br>            noneMatch(e -&gt; e.getName().startsWith(<span class="hljs-string">&quot;雷&quot;</span>));<br>        System.out.println(noneMatch);<br>        <br>        <span class="hljs-comment">//返回第一个元素</span><br>        Optional&lt;Employee&gt; employee = employees.stream().findFirst();<br>        System.out.println(employee);<br>        <br>        <span class="hljs-comment">//返回当前流中的任意元素</span><br>        Optional&lt;Employee&gt; employee1 = employees.parallelStream().findAny();<br>        System.out.println(employee1);<br>    &#125;<br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test2</span><span class="hljs-params">()</span></span>&#123;<br>        List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>        <span class="hljs-comment">// 返回流中元素的总个数</span><br>        <span class="hljs-keyword">long</span> count = employees.stream().f<br>            ilter(e -&gt; e.getSalary() &gt; <span class="hljs-number">5000</span>).<br>            count();<br>        System.out.println(count);<br>		<br>        <span class="hljs-comment">//返回流中最大值</span><br>        <span class="hljs-comment">//练习：返回最高的工资</span><br>        Stream&lt;Double&gt; salaryStream = employees.stream().map(e -&gt; e.getSalary());<br>        Optional&lt;Double&gt; maxSalary = salaryStream.max(Double::compare);<br>        System.out.println(maxSalary);<br>       <br>        <span class="hljs-comment">//返回流中最小值</span><br>        <span class="hljs-comment">//练习：返回最低工资的员工</span><br>        Optional&lt;Employee&gt; employee = employees.stream().<br>            min((e1, e2) -&gt; Double.compare(e1.getSalary(), e2.getSalary()));<br>        System.out.println(employee);<br>        <br>        <span class="hljs-comment">//内部迭代</span><br>        employees.stream().forEach(System.out::println);<br>        <br>        <span class="hljs-comment">//使用集合的遍历操作</span><br>        employees.forEach(System.out::println);<br>    &#125;<br>    <br>    <span class="hljs-comment">//2-归约</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test3</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//练习1：计算1-10的自然数的和</span><br>        List&lt;Integer&gt; list = Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>);<br>        Integer sum = list.stream().reduce(<span class="hljs-number">0</span>, Integer::sum);<br>        System.out.println(sum);<br><br>        <span class="hljs-comment">//练习2：计算公司所有员工工资的总和</span><br>        List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>        <br>        Stream&lt;Double&gt; salaryStream = employees.stream().map(Employee::getSalary);<br>        Optional&lt;Double&gt; sumMoney = salaryStream.reduce((d1,d2) -&gt; d1 + d2);<br>        System.out.println(sumMoney.get());<br>    &#125;<br>    <br>    <span class="hljs-comment">//3-收集</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">test4</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-comment">//练习1：查找工资大于6000的员工，结果返回为一个List或Set</span><br>        List&lt;Employee&gt; employees = EmployeeData.getEmployees();<br>       <br>        <span class="hljs-comment">//返回List</span><br>        List&lt;Employee&gt; employeeList = employees.stream().<br>            filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).<br>            collect(Collectors.toList());<br>        employeeList.forEach(System.out::println);<br>        <br>        <span class="hljs-comment">//返回Set</span><br>        Set&lt;Employee&gt; employeeSet = employees.stream().<br>            filter(e -&gt; e.getSalary() &gt; <span class="hljs-number">6000</span>).<br>            collect(Collectors.toSet());<br>        employeeSet.forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="五、Optional类"><a href="#五、Optional类" class="headerlink" title="五、Optional类"></a>五、Optional类</h1><p><code>Optional&lt;T&gt;</code>类(<code>java.util.Optional</code>)是一个容器类，它可以保存类型<code>T</code>的值，代表这个值存在。或者仅仅保存<code>null</code>，表示这个值不存在。是为了避免出现空指针异常而创建的。</p>
<blockquote>
<p>Optional容器类，存放的是对象</p>
</blockquote>
<p>原来用<code>null</code>表示一个值不存在，现在<code>Optional</code>可以更好的表达这个概念。并且可以避免空指针异常。</p>
<p><code>Optional</code>类提供了如下方法，利用这些方法，可以不用显式进行空值检测：<br><strong>创建Optional类对象的方法</strong>：</p>
<ul>
<li><code>Optional.of(T t)</code>：创建一个<code>Optional</code>实例，<code>t</code>必须非空；</li>
<li><code>Optional.empty()</code>：创建一个空的<code>Optional</code>实例</li>
<li><code>Optional.ofNullable(T t)</code>：<code>t</code>可以为<code>null</code></li>
</ul>
<p><strong>判断Optional容器中是否包含对象</strong>：</p>
<ul>
<li><code>boolean isPresent()</code>：判断是否包含对象</li>
<li><code>void ifPresent(Consumer&lt;? super T&gt; consumer)</code>：如果有值，就执行<code>Consumer</code>接口的实现代码，并且该值会作为参数传给它。</li>
</ul>
<p><strong>获取Optional容器的对象</strong>：</p>
<ul>
<li><code>T get()</code>:如果调用对象包含值，返回该值，否则抛异常</li>
<li><code>T orElse(T other)</code>：如果有值则将其返回，否则返回指定的other对象。</li>
<li><code>T orElseGet(Supplier&lt;? extends T&gt; other)</code>：如果有值则将其返回，否则返回由<code>Supplier</code>接口实现类提供的对象。</li>
<li><code>T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</code>：如果有值则将其返回，否则抛出由<code>Supplier</code>接口实现类提供的异常。</li>
</ul>
<p>应用举例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Girl</span></span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Girl</span><span class="hljs-params">()</span> </span>&#123;&#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Girl</span><span class="hljs-params">(String name)</span> </span>&#123;<span class="hljs-keyword">this</span>.name = name;&#125;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OptionalTest</span></span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;<br>        Girl girl = <span class="hljs-keyword">new</span> Girl(<span class="hljs-string">&quot;Jack&quot;</span>);<br>        <span class="hljs-comment">//如果值为空，则返回指定的对象</span><br>        <span class="hljs-comment">//值非空，返回非空值： Girl&#123;name=&#x27;Jack&#x27;&#125;</span><br>        System.out.println(Optional.ofNullable(girl).<br>                           orElse(<span class="hljs-keyword">new</span> Girl(<span class="hljs-string">&quot;Jessica&quot;</span>)));<br>        <span class="hljs-comment">//值为空，返回指定值：Girl&#123;name=&#x27;Tom&#x27;&#125;</span><br>        System.out.println(Optional.ofNullable(<span class="hljs-keyword">null</span>).<br>                           orElse(<span class="hljs-keyword">new</span> Girl(<span class="hljs-string">&quot;Tom&quot;</span>)));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>Kangshitao</li>
    <li><strong>本文链接：</strong><a href="http://kangshitao.github.io/2021/04/18/java-note-1601/index.html" title="http:&#x2F;&#x2F;kangshitao.github.io&#x2F;2021&#x2F;04&#x2F;18&#x2F;java-note-1601&#x2F;index.html">http:&#x2F;&#x2F;kangshitao.github.io&#x2F;2021&#x2F;04&#x2F;18&#x2F;java-note-1601&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
          <section class="donate">
  <div id="qrcode-donate">
    <img   class="lazyload" data-original="https://cdn.jsdelivr.net/gh/kangshitao/BlogPicture@main/img/alipay.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" >
  </div>
  <div class="icon">
    <a href="javascript:;" id="alipay"><i class="iconfont iconalipay"></i></a>
    <a href="javascript:;" id="wechat"><i class="iconfont iconwechat-fill"></i></a>
  </div>
</section>
        
        
  <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul> 

        
  <nav class="nav">
    <a href="/2021/04/19/java-note-1701/"><i class="iconfont iconleft"></i>Java学习笔记17-Java9&10&11新特征</a>
    <a href="/2021/04/18/java-note-1501/">Java学习笔记15-反射<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
        <section class="comments">
  
    <div class="btn" id="comments-btn">查看评论</div>
  
  
<div id="valine"></div>
<script defer src="//unpkg.com/valine/dist/Valine.min.js"></script>
<script>
  window.onload = function () {
    var loadValine = function () {
      new Valine({
        el: '#valine',
        app_id: "dVB32zRRBIgKa5WuB56mtboj-gzGzoHsz",
        app_key: "XipU873t8gkSypbwl1HWUARD",
        placeholder: "write comment content...",
        avatar: "mp",
        pageSize: "10",
        lang: "zh-CN",
      });
    }
    if ( true ) {
      $("#comments-btn").on("click", function () {
        $(this).hide();
        loadValine();
		var title1="text=Live and Learn有新评论啦~ --by Valine"
		var SCKEY_Server="SCT21455TskriUeyliOqL6kHLhiCOMmlB"
		var ValineButton=document.getElementsByClassName("vsubmit vbtn")[0];
		function send_valine_Server(){
			var text="desp=";
			var pageurl=document.URL;
			var ptime=new Date();
			var vnick=document.getElementsByClassName("vnick vinput")[0].value;
			var veditor=document.getElementsByClassName("veditor vinput")[0].value;
			var data=text+"|昵称"+"|评论内容"+"|跳转链接"+"|评论时间"+"\n"+"|----|----|----|----|"+"\n"+"|"+vnick+"|"+veditor+"|"+pageurl+"|" +ptime.toLocaleString()+"|";
			var httpRequest = new XMLHttpRequest();//第一步：创建需要的对象
			httpRequest.open('POST', 'https://sctapi.ftqq.com/'+SCKEY_Server+'.send', true); //第二步：打开连接
			httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");//设置请求头 注：post方式必须设置请求头（在建立连接后设置请求头）
			httpRequest.send(title1+"&"+data);//发送请求 将请头体体写在send中
		};
		ValineButton.onclick=send_valine_Server;
      });
    } else {
      loadValine();
    }
  };
 
</script>


</section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-8-%E7%AE%80%E4%BB%8B"><span class="toc-text">Java 8 简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">一、Lambda表达式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0%E5%BC%8F-Functional-%E6%8E%A5%E5%8F%A3"><span class="toc-text">二、函数式(Functional)接口</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%E4%B8%8E%E6%9E%84%E9%80%A0%E5%99%A8%E5%BC%95%E7%94%A8"><span class="toc-text">三、方法引用与构造器引用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8"><span class="toc-text">1、方法引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%9E%84%E9%80%A0%E5%99%A8%E5%BC%95%E7%94%A8"><span class="toc-text">2、构造器引用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E6%95%B0%E7%BB%84%E5%BC%95%E7%94%A8"><span class="toc-text">3、数组引用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%BC%BA%E5%A4%A7%E7%9A%84Stream-API"><span class="toc-text">四、强大的Stream API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Stream%E7%AE%80%E4%BB%8B"><span class="toc-text">1、Stream简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BD%BF%E7%94%A8Stream"><span class="toc-text">2、使用Stream</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81Stream%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-text">3、Stream实例化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81Stream%E4%B8%AD%E9%97%B4%E6%93%8D%E4%BD%9C"><span class="toc-text">4、Stream中间操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81Stream%E7%BB%88%E6%AD%A2%E6%93%8D%E4%BD%9C"><span class="toc-text">5、Stream终止操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81Optional%E7%B1%BB"><span class="toc-text">五、Optional类</span></a></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=1574716653 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#12B7F5'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconQQ "></i>
      </a><a 
        href="javascript:; "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#09BB07'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconwechat-fill "></i>
      </a><a 
        href="https://github.com/kangshitao "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#24292E'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a 
        href="mailto:1574716653@qq.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#FF3B00" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">Total:
  <span id="busuanzi_value_site_pv" style="font-size:12px;"></span></span>
  <span id="busuanzi_container_site_uv" >| Visitors:
  <span id="busuanzi_value_site_uv" style="font-size:12px;"></span></span>
  </div>
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
    <div class="search">
  <div class="search-container">
    <div class="search-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <div class="search-input-wrapper">
      <i class="search-input-icon iconfont iconsearch"></i>
      <input class="search-input" type="search" id="search-input" placeholder="Search..." autofocus autocomplete="off"
        autocorrect="off" autocapitalize="off">
    </div>
    <div class="search-output" id="search-output"></div>
  </div>
</div>
  
  
  
<script src="/js/clicklove.js"></script>
<!-- 页面点击小红心 -->
  
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>



  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>






  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>



  <script>
  $.getScript("//cdn.jsdelivr.net/npm/leancloud-storage@4.1.0/dist/av-min.js", () => {

    AV.init({
      appId: 'dVB32zRRBIgKa5WuB56mtboj-gzGzoHsz',
      appKey: 'XipU873t8gkSypbwl1HWUARD',
      serverURLs: 'https://leancloud.cn/',
    });

    const showCount = (Counter) => {
      const asyncLimit = new AsyncLimit(2);
      $(".leancloud").each(async (e) => {
        const url = $(".leancloud").eq(e).attr('id').trim();
        const query = new AV.Query("Counter");
        query.equalTo("words", url);
        let count = await asyncLimit.run(() => query.count());
        $(".leancloud").eq(e).text(count ? count : '--');
      });
    }

    const addCount = (Counter) => {
      const url = $(".leancloud").length === 1 ? $(".leancloud").attr('id').trim() : 'http://kangshitao.github.io';
      var query = new Counter;
      query.save({
        words: url
      });
    }

    $(function () {
	  const Counter = AV.Object.extend("Counter");
	  showCount(Counter);
      const localhost = /http\:\/\/localhost|http\:\/\/127.0.0.1|http\:\/\/0.0.0.0/;
      if (localhost.test(document.URL)) {
	    return;
	  }
	  addCount(Counter);
    });
  });
</script>





  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>







  <script>
    window.ga = window.ga || function () {
      (ga.q = ga.q || []).push(arguments)
    };
    ga.l = +new Date;
    ga('create', 'G-0FZTGJZNYS', 'auto');
    ga('send', 'pageview');
  </script>
  <script defer src='https://www.google-analytics.com/analytics.js'></script>







</html>